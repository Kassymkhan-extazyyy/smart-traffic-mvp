/* === Brand tokens === */
:root{
  --brand-50:#f5f9ff;
  --brand-100:#eaf2ff;
  --brand-200:#dbe8ff;
  --brand-600:#2563eb; /* основной синий */
  --brand-700:#1e40af;
  --ink:#0b1324;
}

/* page bg */
body{ background: linear-gradient(180deg,var(--brand-50),#fff); }

/* === Soft UI helpers === */
.card{
  border-radius: 16px;
  background: rgba(255,255,255,.92);
  backdrop-filter: blur(6px);
  box-shadow: 0 10px 30px rgba(16,43,120,.06), 0 2px 8px rgba(16,43,120,.05);
}

.neu{
  border-radius: 20px;
  background: #fff;
  box-shadow:
    8px 8px 18px rgba(18,53,120,.08),
    -8px -8px 18px rgba(255,255,255,.9);
}

/* components */
.btn-primary{
  @apply px-4 py-2 rounded-xl text-white font-medium transition;
  background: var(--brand-600);
  box-shadow: 0 6px 16px rgba(37,99,235,.25);
}
.btn-primary:hover{ filter: brightness(1.03); }
.btn-primary:active{ transform: translateY(1px); }

.btn-ghost{
  @apply px-4 py-2 rounded-xl font-medium border transition;
  background:#fff; border-color:#e5e7eb;
}
.btn-ghost:hover{ box-shadow:0 6px 16px rgba(16,43,120,.08); }

.chip{
  @apply px-3 py-1.5 rounded-full border text-sm;
  background:#fff; border-color:#e5e7eb;
}
.chip--active{
  color:#fff; background:var(--brand-600); border-color:transparent;
}

.icon-btn{
  @apply inline-flex items-center gap-2 px-3 py-2 rounded-xl;
  background:#fff; border:1px solid #e5e7eb;
  box-shadow: 0 4px 12px rgba(16,43,120,.06);
}

/* БЛИК — shine */
@keyframes shine {
  0%   { background-position: -200px 0; }
  100% { background-position: 200px 0; }
}
/* Класс, который включает блик */
.shine {
  background-image: linear-gradient(120deg,
    rgba(255,255,255,0.15) 0%,
    rgba(255,255,255,0.55) 50%,
    rgba(255,255,255,0.15) 100%);
  background-repeat: no-repeat;
  background-size: 200px 100%;
  animation: shine 3s infinite linear;
}


/* опциональный лёгкий «шум» для глубины (можно не использовать) */
.smartcity-noise {
  position: relative;
}
.smartcity-noise::after {
  content: "";
  pointer-events: none;
  position: absolute; inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='2' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3CfeComponentTransfer%3E%3CfeFuncA type='table' tableValues='0 0 0 0.02'/%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  opacity: .25;
  mix-blend-mode: multiply;
}

/* ===== Smart‑City Backdrop & Noise ===== */
.smartcity-bg{
  background:
    radial-gradient(60vw 60vw at 80% -10%, rgba(59,130,246,.12), transparent 60%),
    radial-gradient(40vw 40vw at 10% -10%, rgba(16,185,129,.10), transparent 60%),
    linear-gradient(180deg, #eef2f7 0%, #e9edf3 40%, #e7ebf1 100%);
}
.smartcity-noise{
  position: relative;
}
.smartcity-noise::after{
  content:"";
  position: fixed; inset:0; pointer-events:none; z-index:0;
  opacity:.06; mix-blend-mode:multiply;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence baseFrequency='0.75' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.45'/%3E%3C/svg%3E");
  animation: noisePan 18s linear infinite;
}
@keyframes noisePan { from{transform:translate3d(0,0,0)} to{transform:translate3d(-10%,0,0)} }

/* ===== Skyline silhouette (низкий контраст) ===== */
.city-skyline{
  position: fixed; left:0; right:0; bottom:-6px; height:22vh;
  pointer-events:none; z-index:1; opacity:.18;
  background-repeat: repeat-x;
  background-size: 900px 100%;
  background-position: 0% 100%;
  filter: blur(0.2px) saturate(0.9);
  animation: skylinePan 60s linear infinite;
  background-image:
    url('data:image/svg+xml;utf8,\
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 200" preserveAspectRatio="none">\
      <defs><linearGradient id="g" x1="0" y1="0" x2="0" y2="1">\
        <stop offset="0%" stop-color="%23222F3E"/><stop offset="100%" stop-color="%234B5563"/></linearGradient></defs>\
      <rect width="900" height="200" fill="url(%23g)"/>\
      <g fill="%23343f52">\
        <rect x="10" y="60" width="70" height="140"/><rect x="90" y="90" width="50" height="110"/>\
        <rect x="150" y="40" width="90" height="160"/><rect x="250" y="80" width="60" height="120"/>\
        <rect x="320" y="70" width="80" height="130"/><rect x="410" y="95" width="55" height="105"/>\
        <rect x="480" y="50" width="95" height="150"/><rect x="585" y="85" width="65" height="115"/>\
        <rect x="660" y="60" width="85" height="140"/><rect x="755" y="100" width="50" height="100"/>\
        <rect x="815" y="65" width="70" height="135"/>\
      </g>\
      <g fill="%233b4761" opacity="0.55">\
        <rect x="45" y="110" width="16" height="24"/><rect x="175" y="120" width="18" height="22"/>\
        <rect x="360" y="115" width="16" height="20"/><rect x="700" y="118" width="16" height="22"/>\
      </g>\
    </svg>');
}
@keyframes skylinePan{ from{background-position-x:0} to{background-position-x:-900px} }

/* ===== Billboard shine эффект ===== */
.shine{
  position: relative; overflow: hidden;
}
.shine::after{
  content:""; position:absolute; inset:-20% -120%; transform:skewX(-20deg);
  background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,.45) 45%, rgba(255,255,255,.1) 60%, transparent 100%);
  animation: sweep 5.5s ease-in-out infinite;
}
@keyframes sweep{
  0%{ transform:translateX(-60%) skewX(-20deg); }
  55%{ transform:translateX(110%) skewX(-20deg); }
  100%{ transform:translateX(110%) skewX(-20deg); }
}

/* ===== Дороги/разметка/тротуары для мини‑перекрёстка ===== */
.road{
  background: #c8cdd5;
  box-shadow: inset 0 0 0 2px rgba(0,0,0,.08);
}
.asphalt{
  background: #9aa3af;
  background-image:
      repeating-linear-gradient(90deg, transparent 0 10px, rgba(0,0,0,.035) 10px 20px);
}
.lane-dash{
  position: absolute; pointer-events:none; inset:0;
  background-image:
    linear-gradient(#eaeef5 0 0),
    linear-gradient(#eaeef5 0 0);
  background-size: 6px 60%, 60% 6px;
  background-repeat: repeat-y, repeat-x;
  background-position: center, center;
  mask: radial-gradient(transparent 26px, #000 28px); /* «дырка» в центре */
  opacity:.85;
}
.crosswalk{
  background-image: repeating-linear-gradient(90deg, rgba(255,255,255,.9) 0 8px, rgba(255,255,255,0) 8px 18px);
  opacity:.85;
}

/* мелкие иконки‑«огни города» в фоне (едва заметные) */
.city-dots{
  position: fixed; inset:0; pointer-events:none; z-index:1; opacity:.10;
  background-image: radial-gradient(circle, #60a5fa 0 1px, transparent 1px);
  background-size: 120px 120px;
  animation: dotsBlink 10s ease-in-out infinite alternate;
}
@keyframes dotsBlink{ from{opacity:.06} to{opacity:.12} }

.buildings {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  height: 20vh;
  background: linear-gradient(to top, #374151, #4b5563);
  clip-path: polygon(
    0% 100%, 0% 50%, 5% 50%, 5% 30%, 10% 30%, 10% 70%,
    15% 70%, 15% 40%, 20% 40%, 20% 80%, 25% 80%, 25% 20%,
    30% 20%, 30% 60%, 35% 60%, 35% 35%, 40% 35%, 40% 85%,
    45% 85%, 45% 25%, 50% 25%, 50% 75%, 55% 75%, 55% 30%,
    60% 30%, 60% 90%, 65% 90%, 65% 40%, 70% 40%, 70% 70%,
    75% 70%, 75% 20%, 80% 20%, 80% 60%, 85% 60%, 85% 35%,
    90% 35%, 90% 80%, 95% 80%, 95% 30%, 100% 30%, 100% 100%
  );
  opacity: .35;
  z-index: 0;
}

/* более явный силуэт домов */
.city-skyline-strong{
  position: fixed;
  left: 0; right: 0; bottom: -2px;
  height: 22vh;
  pointer-events: none;
  z-index: 2;              /* ВЫШЕ, чем шум (.smartcity-noise::after с z-index:0) */
  opacity: .55;            /* заметнее */
  background-repeat: repeat-x;
  background-size: 900px 100%;
  background-position: 0% 100%;
  animation: skylinePan 50s linear infinite;
  background-image: url('data:image/svg+xml;utf8,\
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 200" preserveAspectRatio="none">\
    <rect width="900" height="200" fill="%233b4252"/>\
    <g fill="%232b3344">\
      <rect x="0" y="120" width="60" height="80"/><rect x="62" y="80" width="70" height="120"/>\
      <rect x="140" y="60" width="100" height="140"/><rect x="245" y="100" width="65" height="100"/>\
      <rect x="315" y="70" width="85" height="130"/><rect x="405" y="40" width="110" height="160"/>\
      <rect x="520" y="95" width="60" height="105"/><rect x="585" y="60" width="95" height="140"/>\
      <rect x="683" y="110" width="70" height="90"/><rect x="757" y="75" width="80" height="125"/>\
      <rect x="840" y="95" width="60" height="105"/>\
    </g>\
    <g fill="%23a3b2d6" opacity="0.35">\
      <rect x="20" y="135" width="8" height="18"/><rect x="175" y="125" width="10" height="20"/>\
      <rect x="360" y="120" width="10" height="18"/><rect x="720" y="128" width="10" height="20"/>\
    </g>\
  </svg>');
}
@keyframes skylinePan{ from{background-position-x:0} to{background-position-x:-900px} }

/* Городские кварталы (тихий фон) */
.city-block{
  position:absolute; border-radius:6px;
  background:
    linear-gradient(180deg, rgba(0,0,0,.05), rgba(0,0,0,.08)),
    repeating-linear-gradient(90deg, rgba(255,255,255,.12) 0 6px, transparent 6px 12px);
  box-shadow:
    inset 0 0 0 1px rgba(0,0,0,.07),
    0 1px 2px rgba(0,0,0,.05);
  opacity:.55;
}
.city-block.small{ border-radius:5px; }
.city-block.tiny{ border-radius:4px; opacity:.48; }

/* ===== THEME SWITCH ===== */
.theme-day {
  --bg-1: #eef2f7;
  --bg-2: #e9edf3;
  --road: #cfd4db;
  --asphalt: #9aa3af;
  --lane: #eaeef5;
  --text: #0f172a;
  --neon: #22d3ee;  /* бирюзовый акцент */
}

.theme-night {
  --bg-1: #0b1020;
  --bg-2: #10172a;
  --road: #2a3140;
  --asphalt: #1f2533;
  --lane: rgba(255,255,255,.25);
  --text: #e5edff;
  --neon: #7c3aed;  /* фиолетовый акцент */
}

/* подменяем фон smartcity-bg на тему */
.theme-day.smartcity-bg{
  background:
    radial-gradient(60vw 60vw at 80% -10%, rgba(59,130,246,.10), transparent 60%),
    radial-gradient(40vw 40vw at 10% -10%, rgba(16,185,129,.08), transparent 60%),
    linear-gradient(180deg, var(--bg-1) 0%, var(--bg-2) 40%, var(--bg-2) 100%);
}
.theme-night.smartcity-bg{
  background:
    radial-gradient(60vw 60vw at 80% -10%, rgba(59,130,246,.20), transparent 60%),
    radial-gradient(40vw 40vw at 10% -10%, rgba(168,85,247,.15), transparent 60%),
    linear-gradient(180deg, var(--bg-1) 0%, var(--bg-2) 60%, var(--bg-2) 100%);
}

/* шум чуть слабее ночью */
.theme-night .smartcity-noise::after{ opacity:.03 }

/* дороги берут цвета темы */
.road{ background: var(--road); box-shadow: inset 0 0 0 2px rgba(0,0,0,.08); }
.asphalt{ background: var(--asphalt); background-image:
  repeating-linear-gradient(90deg, transparent 0 10px, rgba(0,0,0,.05) 10px 20px); }
.lane-dash{
  background-image: linear-gradient(var(--lane) 0 0), linear-gradient(var(--lane) 0 0);
}

/* ===== Городские кварталы: "окна" ночью ===== */
@keyframes twinkle {
  0%, 100% { opacity: .0 }
  5%  { opacity: .35 }
  6%  { opacity: .1 }
  15% { opacity: .4 }
  16% { opacity: .08 }
  50% { opacity: .22 }
}
.theme-night .city-block::after{
  content:"";
  position:absolute; inset:8% 10%;
  background:
    repeating-linear-gradient(90deg, rgba(255,214,102,.9) 0 6px, transparent 6px 14px),
    repeating-linear-gradient(0deg,  rgba(255,214,102,.9) 0 6px, transparent 6px 16px);
  filter: drop-shadow(0 0 2px rgba(255,214,102,.8));
  mix-blend-mode: screen;
  opacity:.18;
  animation: twinkle 6s linear infinite;
}

/* ===== Billboard ads: плавный fade/slide + неон-акцент ===== */
.ad-surface{
  position: relative; overflow: hidden;
  border-radius: .75rem;
  border: 1px solid rgba(255,255,255,.25);
  box-shadow: 0 6px 16px rgba(0,0,0,.15);
}
.ad-slide{
  position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
  padding: .75rem; text-align:center; font-weight:600; letter-spacing:.2px;
  color: white;
  transition: opacity .6s ease, transform .6s ease;
}
.ad-slide.hidden{ opacity:0; transform: translateY(8%); pointer-events:none; }
.ad-slide.visible{ opacity:1; transform: translateY(0%); }

/* готовые градиенты под “умный город” */
.ad-g-blue { background: linear-gradient(180deg, #2563eb, #0ea5e9); }
.ad-g-green{ background: linear-gradient(180deg, #10b981, #22c55e); }
.ad-g-purple{ background: linear-gradient(180deg, #7c3aed, #4f46e5); }
.ad-g-cyan{ background: linear-gradient(180deg, #06b6d4, #3b82f6); }

/* тонкая неоновая рамка по теме */
.neon-ring{
  box-shadow:
    0 0 0 1px rgba(255,255,255,.15) inset,
    0 0 16px 2px var(--neon);
}

.road {
  background: #c8cdd5;
  box-shadow: inset 0 0 0 2px rgba(0,0,0,.08);
}

.asphalt {
  background: #9aa3af;
  background-image: repeating-linear-gradient(
    90deg,
    transparent 0 10px,
    rgba(0,0,0,.035) 10px 20px
  );
}

.lane-dash {
  position: absolute;
  pointer-events: none;
  inset: 0;
  background-image:
    linear-gradient(#eaeef5 0 0),
    linear-gradient(#eaeef5 0 0);
  background-size: 6px 60%, 60% 6px;
  background-repeat: repeat-y, repeat-x;
  background-position: center, center;
  mask: radial-gradient(transparent 26px, #000 28px);
  opacity: .85;
}

.crosswalk {
  background-image: repeating-linear-gradient(
    90deg,
    rgba(255,255,255,.9) 0 8px,
    rgba(255,255,255,0) 8px 18px
  );
  opacity: .85;
}

.theme-day {
  --road-color: #c8cdd5;
  --asphalt-color: #9aa3af;
  --sky-bg: #f3f4f6;
  --building-opacity: 0.35;
}

.theme-night {
  --road-color: #374151;
  --asphalt-color: #1f2937;
  --sky-bg: #111827;
  --building-opacity: 0.6;
}

/* применяй переменные */
.road { background: var(--road-color); }
.asphalt { background: var(--asphalt-color); }
.smartcity-bg { background-color: var(--sky-bg); }
.city-skyline-strong { opacity: var(--building-opacity); }

/* “окна” в домах ночью */
.theme-night .city-skyline-strong::after {
  content:"";
  position:absolute; inset:0;
  background-image: radial-gradient(circle, #fbbf24 1px, transparent 1px);
  background-size: 20px 20px;
  opacity:.3;
}

.city-block{
  position:absolute; border-radius:6px;
  background:
    linear-gradient(180deg, rgba(0,0,0,.05), rgba(0,0,0,.08)),
    repeating-linear-gradient(90deg, rgba(255,255,255,.12) 0 6px, transparent 6px 12px);
  box-shadow:
    inset 0 0 0 1px rgba(0,0,0,.07),
    0 1px 2px rgba(0,0,0,.05);
  opacity:.55;
}
.city-block.small{ border-radius:5px; }
.city-block.tiny{ border-radius:4px; opacity:.48; }

/* Ночной «свет в окнах» (ты уже добавлял — на всякий) */
@keyframes twinkle { 0%,100%{opacity:.0} 5%{opacity:.35} 6%{opacity:.1} 15%{opacity:.4} 16%{opacity:.08} 50%{opacity:.22} }
.theme-night .city-block::after{
  content:""; position:absolute; inset:8% 10%;
  background:
    repeating-linear-gradient(90deg, rgba(255,214,102,.9) 0 6px, transparent 6px 14px),
    repeating-linear-gradient(0deg,  rgba(255,214,102,.9) 0 6px, transparent 6px 16px);
  filter: drop-shadow(0 0 2px rgba(255,214,102,.8));
  mix-blend-mode: screen;
  opacity:.18; animation: twinkle 6s linear infinite;
}

/* фон мини‑карты зависит от темы */
.theme-day .mini-map {
  background: #eef2f7;            /* светлый, как раньше */
}

.theme-night .mini-map {
  background: #0b1020;            /* тёмный «небесный» */
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
}

/* кварталы ночью чуть темнее и тише */
.theme-night .city-block {
  opacity: .45;
  filter: brightness(.85);
}

/* разметка полос в ночи не слепит */
.theme-night .lane-dash {
  opacity: .7;
}

.theme-night .mini-map::after {
  content: "";
  position: absolute; inset: 0; pointer-events: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence baseFrequency='0.75' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.25'/%3E%3C/svg%3E");
  opacity: .05;
}

/* Днём — как было */
.theme-day .city-block{
  opacity:.55;
  filter:none;
}

/* Ночью — немного светлее базу и контур, чтобы было видно на тёмном фоне */
.theme-night .city-block{
  opacity:.70;              /* было .45 — поднимем */
  filter:none;              /* уберём лишнее затемнение */
  background:
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.08)),
    repeating-linear-gradient(90deg, rgba(255,255,255,.10) 0 6px, transparent 6px 12px);
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.06),
    0 1px 2px rgba(0,0,0,.45);
}






